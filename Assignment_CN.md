# 使用 C/C++、Java 或 Python 开发的在线留言板客户端

## 目录
1. 项目概述
2. 开发环境
3. 项目演示
4. 任务清单
5. 项目要求与教程
6. 代码质量
7. 评分工具
8. 提交要求
9. 寻求帮助


## 1. 项目概述
本项目要求实现在线留言板系统的客户端。在线留言板是客户端-服务器（C/S）架构应用，客户端可执行**发布（POST）、获取（GET）、删除（DELETE）** 消息操作；服务器运行在指定端口，支持接收客户端发送的四种命令：POST、GET、DELETE 和 QUIT。

### （1）POST 命令
允许客户端向服务器发送消息，输入规则如下：
- 第一行必须为命令（即 POST）；
- 后续行作为消息内容；
- 消息以特殊符号 `#` 结束。

**示例**：若用户需发布消息“some text!\nmore text.”，输入格式如下：
```
POST
some text!
more text.
#
```
服务器接收消息后，会返回确认响应“OK”。

### （2）GET 命令
服务器接收该命令后，会向客户端发送所有历史消息，包含：
- 原始消息内容；
- 服务器分配的**消息ID**；
- 消息**接收时间**。
客户端需将这些信息打印到屏幕，且会包含其他客户端此前发送的消息（若存在）。

### （3）DELETE 命令
客户端通过消息ID删除服务器中的消息（消息ID可通过GET命令查询），输入规则如下：
- 第一行必须为命令（即 DELETE）；
- 后续每行输入一个待删除的消息ID；
- 操作以符号 `#` 结束。

**示例**：若需删除ID为 0000、0001、0002 的消息，输入格式如下：
```
DELETE
0001
0000
0002
#
```
- 删除成功：服务器返回“OK”；
- 存在无效ID：服务器返回“ERROR”。

### （4）QUIT 命令
客户端通过该命令告知服务器关闭当前会话：
- 服务器接收命令后返回“OK”；
- 确认后断开与客户端的连接。


### 客户端套接字设计示例
假设服务器运行在 IP 地址 `127.0.0.1`、端口 `16111`，客户端套接字工作流程如下：
1. 与服务器建立 TCP 连接；
2. 循环提示用户输入命令；
3. GET/QUIT 命令：仅发送命令名称；
4. POST/DELETE 命令：发送命令名称 + 后续消息内容/待删除ID。

以下是客户端与服务器的典型通信场景：
```
[sh-3.2$ ./MessageBoardClient 127.0.0.1 16111
客户端：WRONG COMMAND
服务器：ERROR-Command not understood（命令无法识别）
客户端：POST
客户端：some text1
客户端：some text2
客户端：#
服务器：OK
客户端：POST
客户端：some text3
客户端：#
服务器：OK
客户端：GET
服务器：Happy Socket Programming（套接字编程愉快）
服务器：MESSAGE ID:0000, RECEIVED DATETIME:15/10/2024 12:13:31（消息ID：0000，接收时间：2024年10月15日 12:13:31）
服务器：some text1
服务器：some text2
服务器：MESSAGE ID:8001, RECEIVED DATETIME:15/10/2024 12:13:40（消息ID：8001，接收时间：2024年10月15日 12:13:40）
服务器：some text3
服务器：#
客户端：DELETE
客户端：INVALID ID（无效ID）
客户端：#
服务器：ERROR- Wrong ID（错误-ID无效）
客户端：DELETE
客户端：0000
客户端：0001
客户端：#
服务器：OK
客户端：GET
服务器：Happy Socket Programming（套接字编程愉快）
服务器：#
客户端：QUIT
服务器：OK
```

> 注：服务器程序已提供，可在项目演示文件中下载；仅需实现客户端程序，命名为 `MessageBoardClient`。


## 2. 开发环境
可选择 C/C++、Java 或 Python 编写客户端，不同操作系统对应的开发工具如下：

### （1）微软 Windows 系统
| 开发语言 | 工具名称       | 下载/安装说明                                                                 |
|----------|----------------|------------------------------------------------------------------------------|
| C/C++    | Visual Studio  | 下载链接：[Visual Studio](https://visualstudio.microsoft.com/downloads/)；需安装 C++ 支持（参考：[安装指南](https://docs.microsoft.com/en-us/cpp/build/vscpp-step-0-installation?view=vs-2017)） |
| Java     | IntelliJ IDEA  | 下载链接：[IntelliJ IDEA（Windows版）](https://www.jetbrains.com/idea/download/#section=windows) |
| Python   | PyCharm        | 下载链接：[PyCharm（Windows版）](https://www.jetbrains.com/pycharm/download/#section=windows) |

### （2）Linux Ubuntu 系统 / Mac OS X 系统
| 开发语言 | 工具名称       | 下载/安装说明                                                                 |
|----------|----------------|------------------------------------------------------------------------------|
| C/C++    | gcc/g++        | 系统默认预装，无需额外下载                                                   |
| Java     | IntelliJ IDEA  | Mac 版：[IntelliJ IDEA（Mac版）](https://www.jetbrains.com/idea/download/#section=mac)；Linux 版：[IntelliJ IDEA（Linux版）](https://www.jetbrains.com/idea/download/#section=linux) |
| Python   | PyCharm        | Mac 版：[PyCharm（Mac版）](https://www.jetbrains.com/pycharm/download/#section=mac)；Linux 版：[PyCharm（Linux版）](https://www.jetbrains.com/pycharm/download/#section=linux) |

> 建议：同一小组成员使用相同操作系统和开发工具，避免协作问题。


## 3. 项目演示
提供不同操作系统的演示程序，用于展示应用运行流程：
- Windows 系统：演示程序（仅支持 Windows 10 64 位）；
- Linux 系统：演示程序（基于 Ubuntu 18 64 位开发）；
- Mac OS 系统：演示程序（基于 Mac OS High Sierra 开发）。


### 3.1 演示程序运行步骤
#### （1）启动服务器程序
- Linux/Mac 系统：打开终端，输入命令 `./MessageBoardServer`；
- Windows 系统：打开命令提示符，输入命令 `MessageBoardServer.exe`。

#### （2）启动客户端程序
- Linux/Mac 系统：终端输入命令 `./MessageBoardClient <server_ip_address> <server_port>`（需替换 `<server_ip_address>` 为服务器IP，`<server_port>` 为服务器端口）；
- Windows 系统：命令提示符输入命令 `MessageBoardClient.exe <server_ip_address> <server_port>`（参数含义同上）。


### 3.2 服务器程序说明
1. 默认端口：服务器默认端口为 `16111`，通常将 `<server_port>` 设为 `16111`；
2. 日志输出：仅在接收错误信息或客户端命令时打印日志，无操作时保持静默；
3. POST 响应：接收 POST 命令后，会打印所有已存储的消息；
4. 监听状态：客户端断开连接后，服务器仍持续监听新连接；
5. 启动方式：通过上述“启动服务器程序”的命令即可运行。


## 4. 任务清单
需完成以下 5 项核心任务，实现客户端功能：

### 任务 1：套接字初始化
- 描述：初始化并创建 TCP 套接字，为后续连接做准备。

### 任务 2：发起连接请求
- 描述：
  1. 接收用户输入的服务器 IP 地址和端口号；
  2. 通过已初始化的套接字，向服务器发起连接请求。

### 任务 3：向服务器发送命令
- 描述：根据命令类型，处理输入并发送至服务器：
  - POST：持续接收用户输入，直到输入仅包含 `#` + 换行符 `\n` 为止；
  - GET：直接发送“GET”命令；
  - DELETE：持续接收待删除的消息ID，直到输入仅包含 `#` + 换行符 `\n` 为止；
  - QUIT：直接发送“QUIT”命令；
  - 其他命令：直接发送该命令（服务器会返回错误响应）。

### 任务 4：接收服务器消息
- 描述：接收服务器响应，并执行对应操作：
  - POST：若收到“OK”，打印“OK”并提示输入下一条命令；
  - GET：接收所有消息并打印到屏幕，后提示输入下一条命令；
  - DELETE：收到“OK”则打印“OK”（删除成功），收到“ERROR - Wrong ID”则打印该错误（删除失败）；
  - QUIT：收到“OK”后，执行“任务 5：关闭套接字”；
  - 其他情况：收到“ERROR - Command not understood”（命令无法识别），打印错误并提示重新输入。

### 任务 5：关闭套接字
- 描述：客户端发送 QUIT 命令且收到服务器“OK”响应后，关闭当前连接套接字。


### 补充：查询服务器 IP 地址
- Linux/Mac 系统：终端输入命令 `ifconfig`，查看网络接口信息；
- Windows 系统：通过“设置 > 网络和 Internet > 网络属性”查看。


## 5. 项目要求与教程
### 5.1 项目教程
提供 C/C++、Java、Python 三种语言的入门教程，帮助启动开发（完成上述 5 项任务即可完成作业）：
- C/C++ 教程：C/C++_tutorial
- Java 教程：Java_tutorial
- Python 教程：Python_tutorial

### 5.2 代码质量要求
需遵循以下编码规范，无统一风格但需满足核心原则：
1. **程序拆分**：将程序拆分为子例程（必要时拆分为多源文件），禁止 500 行代码写在单个子例程中；
2. **注释规范**：
   - 注释需简洁有效，帮助理解代码（而非冗余内容）；
   - 禁止使用《星球大战》《银河系搭车客指南》等台词作为注释（视为无效注释，扣分项）；
   - 注释必须使用英文（学校教学语言）；
3. **变量命名**：变量名需有明确含义，禁止“leia”等无意义名称；
4. **全局变量**：尽量少用（若必须使用，数量需极少），禁止命名为“temp”的全局变量；
5. **返回值处理**：检查所有函数调用的返回值，并进行合理处理（避免忽略错误）。


## 6. 评分工具
### 6.1 基础要求
1. 需在 `readme.txt` 文件中明确说明：
   - 代码的编译方法；
   - 代码的运行方法；
   - 开发环境（操作系统、开发工具）；
2. 助教不负责修复源代码或 Makefile 中的漏洞；
3. 未满足以下条件，作业判定为“未通过”：
   - 无法生成可执行文件；
   - 可执行文件无法正常运行；
   - 输出格式不符合“1. 项目概述”中的要求。

### 6.2 评分标准
程序可正常运行且格式正确时，按以下标准打分：

| 权重 | 评分项                     | 说明                                 |
|------|----------------------------|--------------------------------------|
| 5%   | 套接字初始化               | 初始化逻辑正确性、无错误              |
| 5%   | 连接请求发起               | 服务器IP/端口处理、连接逻辑正确性    |
| 15%  | POST 命令功能              | 消息输入处理、服务器响应处理正确性    |
| 15%  | GET 命令功能               | 命令发送、消息接收与打印正确性        |
| 15%  | DELETE 命令功能            | ID输入处理、删除结果响应处理正确性    |
| 15%  | QUIT 命令功能              | 命令发送、套接字关闭逻辑正确性        |
| 10%  | 代码注释规范性             | 注释完整性、英文表述、无无效内容      |
| 10%  | 变量命名与程序结构         | 变量名有意义、程序拆分合理            |
| 10%  | 错误处理与返回值检查       | 函数返回值处理、异常场景（如无效ID）处理 |


## 7. 提交要求
### 7.1 组队与学术诚信
- 组队规则：可单人完成，或两人一组完成；
- 协作要求：可讨论高层设计，但代码必须独立实现；
- 学术诚信：禁止抄袭/被抄袭（视为严重学术违规，后果自负）。

### 7.2 提交文件清单
需提交以下文件，缺一不可：
1. 源代码文件：根据语言选择对应格式（如 `.cpp`、`.c`、`.py`、`.java`）；
2. `readme.txt` 文件：说明编译方法、运行方法、开发环境；
3. Makefile 文件：仅 C/C++ 项目需要（用于编译代码）。

### 7.3 文件命名规则
用学生 ID 命名文件，格式如下：
- 两人组：`5xxxxxxx-5xxxxxxx.xxx`（两个ID用连字符连接，后缀为源代码格式）；
- 单人：`5xxxxxxx.xxx`（仅一个ID，后缀为源代码格式）；
- readme 文件：`5xxxxxxx-readme.txt`（单人）或 `5xxxxxxx-5xxxxxxx-readme.txt`（两人组）。

### 7.4 提交方式与截止时间
- 提交平台：Canvas；
- 截止时间：按课程要求（**不接受逾期提交**）。


## 8. 寻求帮助
若遇到编程问题，可通过以下方式联系助教：
- 助教姓名：白昭（Bai Zhao）；
- 联系邮箱：zhao.bai@cityu-dg.edu.cn。


### 版权说明
本页面所有内容（源代码、文档、教程）仅用于 CS5222 课程教学，禁止用于其他用途。  
更新时间：2025 年 10 月
